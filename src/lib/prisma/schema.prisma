// Adicione/Atualize no seu schema.prisma

model Profile {
  id        String   @id @default(uuid())
  userId    String   @unique
  username  String   @unique // O "handle" para o deeplink
  name      String
  bio       String?
  avatarUrl String?
  
  // Relações Sociais
  followers Follows[] @relation("following")
  following Follows[] @relation("follower")
  
  // Configurações de Privacidade (1:1)
  privacy   ProfilePrivacy?

  // Conteúdo Futuro
  posts     Post[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("profiles")
}

model ProfilePrivacy {
  id        String  @id @default(uuid())
  profileId String  @unique
  profile   Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)

  isPublic      Boolean @default(true) // Perfil aparece na busca?
  showEmail     Boolean @default(false)
  showLocation  Boolean @default(true)
  showEducation Boolean @default(true) // Exemplo específico citado
  allowMessages Boolean @default(true)

  @@map("profile_privacy")
}

model Follows {
  followerId  String
  followingId String
  follower    Profile @relation("follower", fields: [followerId], references: [id])
  following   Profile @relation("following", fields: [followingId], references: [id])
  createdAt   DateTime @default(now())

  @@id([followerId, followingId])
  @@map("social_follows")
}

model Post {
  id        String   @id @default(uuid())
  profileId String
  profile   Profile  @relation(fields: [profileId], references: [id])
  content   String?
  mediaUrl  String?
  likes     Int      @default(0)
  createdAt DateTime @default(now())

  @@map("social_posts")
}